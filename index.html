<!DOCTYPE html>
<html>
	<head>
		<title>
			Red Neuronal by joZbuyo
		</title>
		<style>
			body{
				background-color: black;
			}



			.container{
				overflow-y: scroll;
			}

			.rightContainer{
				position: absolute;
				right: 0px;
				top: 40px;
				left: 50%;
				bottom: 0px;
				border: solid 3px;
				overflow: hidden;
				display: none;
			}



			#toolbarInfo{
				position: absolute;
				left: 1px;
				background-color: black;
				top: 25px;
				font-size: 10px;
				color: white;
			}

			#botonera{
				position: absolute;
				top: 0px;
				left: 0px;
				width: 100%;
				height: 30px;
				border-collapse:separate;
				border-spacing:5px;
			}



			.toolbar {
			  display: inline-block;
				width: 100%;
			}


			.boton{
				border: solid 1px;
				cursor: pointer;
				user-select: none;
				/*display: table-cell;*/
				padding: 0px 5px 0px 5px;
				text-align: center;
				font-family: "Arial Black", Gadget, sans-serif;
				background-color: #AAAAAA;
				float: left;
			}

			.botonLeft {
			    float: right;
			    right: 21px;
			    position: relative;
			}


			#botonera #play{
				width: 60px;
			}
			#botonera #play.play{
				background-color: #66AA66;
			}
			#botonera #play.pause{
				background-color: #AA6666;
			}
			#help{
				color: #A9FFFE;
			}


			ul {
				list-style-type: none;
				margin:0;
				padding:0;
			}



			li.sly{
				vertical-align: middle;
			}

			li.sly
			div.sly_ref{
				display: inline-block;
				width: 40%;
				height: 100%;
				font-size: 9px;
			}

			li.sly
			input.sly_input{
				position: relative;
				display: inline-block;
				left: 18%;
				width: 39%;
			}

			.rightContainer .maximized {
				top: 0% !important;
				left: 0% !important;
				height: 100% !important;
				width: 100% !important;
			}

		</style>

	</head>

	<body>
		<div id="botonera">
			<div id="play" class="boton play" title="Play o Pause al test continuo">
				Play
			</div>
			<div id="step" class="boton" title="Ejecuta solo un test">
				Step
			</div>

			<div id="presets" class="boton" title="Cargar una preset">
				PRESET
				<select>
					<option value=""></option>
				</select>
			</div>
			<div id="loadRed" class="boton"  title="Carga una red guardada en un json. (se requiere FileBackend: un nodo Vortex corriendo en un node.js)">
				LOAD
			</div>
			<div id="saveRed" class="boton" title="Guarda el estado de la red en un json. (se requiere FileBackend: un nodo Vortex corriendo en un node.js)">
				SAVE
			</div>
			<div id="help" class="boton">
				HELP
			</div>
			<div id="testSelector" class="boton">
				TEST
				<select>
					<option value=""></option>
					<option value="TestAudio">TestAudio</option>
					<option value="TestAutomata">TestAutomata</option>
					<option value="TestAsciiImage">TestAsciiImage</option>

				</select>

			</div>
		</div>



	</body>



	<script src="lib/jquery-2.1.3.min.js"></script>
	<script src="lib/d3.v6.min.js"></script>

	<script src="lib/jQuery.stringify.js"></script>

	<script src="lib/snap.svg-min.js"></script>


	<script src="GuiMatriz.js"></script>
	<script src="TestAutomata.js"></script>
	<script src="TestAudio.js"></script>
	<script src="TestAsciiImage.js"></script>

	<script src="red/Constructor.js"></script>

	<script src="red/Red.js"></script>
	<script src="red/Neurona.js"></script>
	<script src="red/Dendrita.js"></script>
	<script src="red/Sinapsis.js"></script>

	<script src="setups/setupPlantillas.js"></script>


	<script src="setups/setupGuiRed.js"></script>
	<script src="setups/setupRegiones.js"></script>
	<script src="setups/setupGuiDendritas.js"></script>
	<script src="setups/setupPresets.js"></script>



	<script>

		//GLOBAL PARA FÁCIL DEBUG
		var red;
		var test;
		var templates = {};

		$(function(){

			console.log('*****************************************************');
			console.log('HELLO Red Neuronal HELLO - en Javascript by joZbuyo');
			console.log('*****************************************************');
			console.log('');
			console.log('*Probá escribiendo "red;" en la consola, si querés');
			console.log('');
			console.log('HELP:');
			console.log('https://github.com/josetabuyo/RedJavaScript/blob/master/README.md');
			console.log('');



			$('#help').on('click', function(){
				window.location="https://github.com/josetabuyo/RedJavaScript/blob/master/README.md";
			});

			$('#play').on('click', function(){

				if(typeof(test) == "undefined"){
					alert("Falta elegir un test");
					return;
				};


				var btn_play = $('#play');
				btn_play.removeClass('pause');
				btn_play.removeClass('play');


				if(!test.running){
					test.play();
					btn_play.addClass('pause');
					btn_play.text('Pause');
				}else{
					test.stop();
					btn_play.addClass('play');
					btn_play.text('Play');
				}
			});


			$('#step').on('click', function(){
				test.step();
			});





			$('#testSelector>select').on('click', function(){
				$(".rightContainer").hide();

				var cmd = "test = new "+ $(this).val() +"({red: red})";
				console.log(cmd);

				try{
					eval(cmd);
					test.onStep(function(){
						guiRed.refresh();
					});

					test.red = red;
				}catch(e){
					console.log(e)
				}

			});



		  $('.rightContainer .container .toolbar>.maximize').on('click', function(){

		    var this_container = $(this).parent().parent();


		    if(this_container.hasClass('maximized')){
		      $('.rightContainer .container').show();
		      this_container.removeClass('maximized')
		    }else{
		      $('.rightContainer .container').hide();
		      this_container.show();
		      this_container.addClass('maximized');
		    }


		  });



		});
	</script>

	<script>
		$(function(){
			d3.selectAll('svg').on('contextmenu', function(data, index) {

				event.preventDefault();
			});
		});
	</script>


</html>
